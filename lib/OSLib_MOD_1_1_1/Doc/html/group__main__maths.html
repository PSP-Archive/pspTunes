<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Maths</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Maths<br>
<small>
[<a class="el" href="group__main.html">Main</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g433fbd714c96a0d7cc17d66a2eac6184">oslAbs</a>(x)&nbsp;&nbsp;&nbsp;(((x)&lt;0)?(-(x)):(x))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#gc6ea5ef6439400a610f1a540128b00bc">oslMin</a>(x, y)&nbsp;&nbsp;&nbsp;(((x)&lt;(y))?(x):(y))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g674b9eed8c6b4a447abf4f9bdbf0c42d">oslMax</a>(x, y)&nbsp;&nbsp;&nbsp;(((x)&gt;(y))?(x):(y))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g6852111e88ba8a00c69379f4db3bff6c">oslMinMax</a>(x, min, max)&nbsp;&nbsp;&nbsp;((x) &lt; (max) ? ((x) &gt; (min) ? (x) : (min)) : (max))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#gbf11f95847d6551d87ec5e795363e2ca">oslNumberof</a>(n)&nbsp;&nbsp;&nbsp;(sizeof(n)/sizeof(*(n)))</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g47b5951e120c2de6f0076ea3445e7a14">oslSin</a> (float angle, float dist)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g9c32720aad8fa288caa898db617bc2bf">oslCos</a> (float angle, float dist)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#gc074a7cb7c1915c153f2d232d42648a7">oslSini</a> (int angle, int dist)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g7177b17705841e767fffd6ab227e0f0a">oslCosi</a> (int angle, int dist)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__maths.html#g417d21ee05d8ed9d50c5a2328ae6a7b7">oslGetNextPower2</a> (int val)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Main OSLib section. Contains the main routines to initialize and terminate the library. <hr><h2>Define Documentation</h2>
<a class="anchor" name="g433fbd714c96a0d7cc17d66a2eac6184"></a><!-- doxytag: member="oslib.h::oslAbs" ref="g433fbd714c96a0d7cc17d66a2eac6184" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslAbs          </td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((x)&lt;0)?(-(x)):(x))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the absolute value of a number (that is, the positive part of the number).<p>
<div class="fragment"><pre class="fragment"><span class="comment">//Prints 2</span>
<a class="code" href="group__main__debug.html#g88d2f4d23b2aa2f502329ee6e6b6e048">oslPrintf</a>(<span class="stringliteral">"%i"</span>, <a class="code" href="group__main__maths.html#g433fbd714c96a0d7cc17d66a2eac6184">oslAbs</a>(2));
<span class="comment">//Prints 2 as well (the minus sign is ignored in an absolute value)</span>
<a class="code" href="group__main__debug.html#g88d2f4d23b2aa2f502329ee6e6b6e048">oslPrintf</a>(<span class="stringliteral">"%i"</span>, <a class="code" href="group__main__maths.html#g433fbd714c96a0d7cc17d66a2eac6184">oslAbs</a>(-2));
</pre></div> 
</div>
</div><p>
<a class="anchor" name="gc6ea5ef6439400a610f1a540128b00bc"></a><!-- doxytag: member="oslib.h::oslMin" ref="gc6ea5ef6439400a610f1a540128b00bc" args="(x, y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslMin          </td>
          <td>(</td>
          <td class="paramtype">x,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">y&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((x)&lt;(y))?(x):(y))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the smallest value between the two. 
</div>
</div><p>
<a class="anchor" name="g674b9eed8c6b4a447abf4f9bdbf0c42d"></a><!-- doxytag: member="oslib.h::oslMax" ref="g674b9eed8c6b4a447abf4f9bdbf0c42d" args="(x, y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslMax          </td>
          <td>(</td>
          <td class="paramtype">x,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">y&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((x)&gt;(y))?(x):(y))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the greatest value between the two.<p>
<div class="fragment"><pre class="fragment"><span class="comment">//Move the object 1 pixel to the left but make sure it will never go beyond the left corner of the screen.</span>
posX = <a class="code" href="group__main__maths.html#g674b9eed8c6b4a447abf4f9bdbf0c42d">oslMax</a>(posX - 1, 0);
</pre></div> 
</div>
</div><p>
<a class="anchor" name="g6852111e88ba8a00c69379f4db3bff6c"></a><!-- doxytag: member="oslib.h::oslMinMax" ref="g6852111e88ba8a00c69379f4db3bff6c" args="(x, min, max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslMinMax          </td>
          <td>(</td>
          <td class="paramtype">x,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">min,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">max&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((x) &lt; (max) ? ((x) &gt; (min) ? (x) : (min)) : (max))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns a value clamped between a minimum and maximum.<p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">int</span> addColor(<span class="keywordtype">int</span> colValue, <span class="keywordtype">int</span> addValue)                        {
        <span class="comment">//We add addValue to colValue, but we must check the color component is always between 0 and 255.</span>
        colValue = <a class="code" href="group__main__maths.html#g6852111e88ba8a00c69379f4db3bff6c">oslMinMax</a>(colValue + addValue, 0, 255);
        <span class="keywordflow">return</span> colValue;
}
</pre></div> 
</div>
</div><p>
<a class="anchor" name="gbf11f95847d6551d87ec5e795363e2ca"></a><!-- doxytag: member="oslib.h::oslNumberof" ref="gbf11f95847d6551d87ec5e795363e2ca" args="(n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslNumberof          </td>
          <td>(</td>
          <td class="paramtype">n&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(sizeof(n)/sizeof(*(n)))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the number of objects in an array.<p>
<div class="fragment"><pre class="fragment"><a class="code" href="struct_o_s_l___v_i_r_t_u_a_l_f_i_l_e_n_a_m_e.html">OSL_VIRTUALFILENAME</a> ram_files[] =               {
        {<span class="stringliteral">"ram:/file1.jpg"</span>, (<span class="keywordtype">void</span>*)file1_jpg, file1_jpg_size, &amp;<a class="code" href="group__virtualfile__sources.html#g5f620010ae7a231399ad5c339611b5f4">VF_MEMORY</a>},
        {<span class="stringliteral">"ram:/file2.png"</span>, (<span class="keywordtype">void</span>*)file2_png, file2_png_size, &amp;<a class="code" href="group__virtualfile__sources.html#g5f620010ae7a231399ad5c339611b5f4">VF_MEMORY</a>},
};

<span class="comment">//This will display 2, as 2 elements are contained in the table ram_files.</span>
<a class="code" href="group__main__debug.html#g88d2f4d23b2aa2f502329ee6e6b6e048">oslPrintf</a>(<span class="stringliteral">"%i"</span>, <a class="code" href="group__main__maths.html#gbf11f95847d6551d87ec5e795363e2ca">oslNumberof</a>(ram_files));
</pre></div> 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g47b5951e120c2de6f0076ea3445e7a14"></a><!-- doxytag: member="oslib.h::oslSin" ref="g47b5951e120c2de6f0076ea3445e7a14" args="(float angle, float dist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float oslSin           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>dist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculates the sine of an angle in degrees multiplicated by a radius. Returns the result as a float. oslSin and oslCos use the VFPU to compute the result, and thus it's very fast and very precise. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>angle</em>&nbsp;</td><td>Angle in degrees (360° means a full circle) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dist</em>&nbsp;</td><td>Radius of the circle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>sin(angle * PI / 180) * dist</dd></dl>
<div class="fragment"><pre class="fragment"><span class="comment">//Character coordinates</span>
<span class="keywordtype">float</span> cX, cY;
<span class="comment">//Character speed</span>
<span class="keywordtype">float</span> cSpeed;
<span class="comment">//Character angle</span>
<span class="keywordtype">float</span> cAngle;

<span class="comment">//Move the character depending on its instant speed and angle</span>
cX += <a class="code" href="group__main__maths.html#g9c32720aad8fa288caa898db617bc2bf">oslCos</a>(cAngle, cSpeed);
<span class="comment">//In mathematics, positive y coordinates are directed upwards, in informatics it's directed</span>
<span class="comment">//downwards, as if we were writing on a sheet of paper, so we need to substract the sine.</span>
cY -= <a class="code" href="group__main__maths.html#g47b5951e120c2de6f0076ea3445e7a14">oslSin</a>(cAngle, cSpeed);
</pre></div> 
</div>
</div><p>
<a class="anchor" name="g9c32720aad8fa288caa898db617bc2bf"></a><!-- doxytag: member="oslib.h::oslCos" ref="g9c32720aad8fa288caa898db617bc2bf" args="(float angle, float dist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float oslCos           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>dist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculates the cosine of an angle in degrees multiplicated by a radius. Returns the result as a float. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>angle</em>&nbsp;</td><td>Angle in degrees (360° means a full circle) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dist</em>&nbsp;</td><td>Radius of the circle </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>cos(angle * PI / 180) * dist </dd></dl>

</div>
</div><p>
<a class="anchor" name="gc074a7cb7c1915c153f2d232d42648a7"></a><!-- doxytag: member="oslib.h::oslSini" ref="gc074a7cb7c1915c153f2d232d42648a7" args="(int angle, int dist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oslSini           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the sine of an angle in degrees (0 to 360) multiplicated by an integer radius. Returns the result as an integer. These routines use a precalculated lookup table to compute the result. Don't think oslSini and oslCosi are much faster than oslSin and oslCos, it's not the case.<p>
<div class="fragment"><pre class="fragment"><span class="comment">//This code draws a line in a circle which has a radius of 20 pixels. You can play with the angle to move the line.</span>
<span class="keywordtype">int</span> angle = 40, radius = 20;
<span class="comment">//Draw our line. Same remark as for oslSin applies.</span>
<a class="code" href="group__drawing__shapes.html#gc7fa8b25774d2baaf98404950fcf25e5">oslDrawLine</a>(240, 136, 240 + <a class="code" href="group__main__maths.html#g7177b17705841e767fffd6ab227e0f0a">oslCosi</a>(angle, radius), 136 - <a class="code" href="group__main__maths.html#gc074a7cb7c1915c153f2d232d42648a7">oslSini</a>(angle, radius));
</pre></div> 
</div>
</div><p>
<a class="anchor" name="g7177b17705841e767fffd6ab227e0f0a"></a><!-- doxytag: member="oslib.h::oslCosi" ref="g7177b17705841e767fffd6ab227e0f0a" args="(int angle, int dist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oslCosi           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the cosine of an angle in degrees (0 to 360) multiplicated by an integer radius. Returns the result as an integer. 
</div>
</div><p>
<a class="anchor" name="g417d21ee05d8ed9d50c5a2328ae6a7b7"></a><!-- doxytag: member="oslib.h::oslGetNextPower2" ref="g417d21ee05d8ed9d50c5a2328ae6a7b7" args="(int val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oslGetNextPower2           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>val</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the next (upper) power of two of a number.<p>
<div class="fragment"><pre class="fragment"><span class="comment">//Prints 256, as 256 = 2^8 (2^7 = 128, too low).</span>
<a class="code" href="group__main__debug.html#g88d2f4d23b2aa2f502329ee6e6b6e048">oslPrintf</a>(<span class="stringliteral">"%i"</span>, <a class="code" href="group__main__maths.html#g417d21ee05d8ed9d50c5a2328ae6a7b7">oslGetNextPower2</a>(200);
</pre></div> 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 24 10:25:30 2010 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
