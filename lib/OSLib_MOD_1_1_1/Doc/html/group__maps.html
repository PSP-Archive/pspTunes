<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Maps</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Maps</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g7836fb530ba637c027eb0d5703a4c06d">OSL_MAP_FORMATS</a> { <a class="el" href="group__maps.html#gg7836fb530ba637c027eb0d5703a4c06dedf97c90ae17227cb4106529940042ae">OSL_MF_U16</a> = 1, 
<a class="el" href="group__maps.html#gg7836fb530ba637c027eb0d5703a4c06d5f37f5f3fd904a8709f3d56b406027b3">OSL_MF_U16_GBA</a> = 2
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#gf573c4a98417de7b7f1c4e3731ee6611">OSL_MAP_FLAGS</a> { <a class="el" href="group__maps.html#ggf573c4a98417de7b7f1c4e3731ee66116d6f526c0681b65ac6ec4e7a38ab44a6">OSL_MF_SIMPLE</a> = 1, 
<a class="el" href="group__maps.html#ggf573c4a98417de7b7f1c4e3731ee66115ec453c38f82abde2ba268b97d82e226">OSL_MF_TILE1_TRANSPARENT</a> = 2
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#gde5d26946532efac20b388eee01aaba2">oslCreateMap</a> (<a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, void *map_data, int tileX, int tileY, int mapSizeX, int mapSizeY, int map_format)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g0656fe572397df56eb032bc5b368b3d3">oslDrawMap</a> (<a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g8ffda5dd55be2d0efdb45eeed26ec243">oslDrawMapSimple</a> (<a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *m)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__maps.html#g5efcba72b7aa0357ec81308195741259">oslDeleteMap</a> (<a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *m)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Map functions in OSLib. <hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="g7836fb530ba637c027eb0d5703a4c06d"></a><!-- doxytag: member="map.h::OSL_MAP_FORMATS" ref="g7836fb530ba637c027eb0d5703a4c06d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__maps.html#g7836fb530ba637c027eb0d5703a4c06d">OSL_MAP_FORMATS</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Available map formats. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg7836fb530ba637c027eb0d5703a4c06dedf97c90ae17227cb4106529940042ae"></a><!-- doxytag: member="OSL_MF_U16" ref="gg7836fb530ba637c027eb0d5703a4c06dedf97c90ae17227cb4106529940042ae" args="" -->OSL_MF_U16</em>&nbsp;</td><td>
16 bit format </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg7836fb530ba637c027eb0d5703a4c06d5f37f5f3fd904a8709f3d56b406027b3"></a><!-- doxytag: member="OSL_MF_U16_GBA" ref="gg7836fb530ba637c027eb0d5703a4c06d5f37f5f3fd904a8709f3d56b406027b3" args="" -->OSL_MF_U16_GBA</em>&nbsp;</td><td>
16 bit, 10 bit for the tile number, 2 for the mirror, palette is unsupported - addit1 holds the number of tile bits (10 by default), the two next bits are for mirroring (11 = horizontal and 12 = vertical) </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="gf573c4a98417de7b7f1c4e3731ee6611"></a><!-- doxytag: member="map.h::OSL_MAP_FLAGS" ref="gf573c4a98417de7b7f1c4e3731ee6611" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__maps.html#gf573c4a98417de7b7f1c4e3731ee6611">OSL_MAP_FLAGS</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Internal map flags. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ggf573c4a98417de7b7f1c4e3731ee66116d6f526c0681b65ac6ec4e7a38ab44a6"></a><!-- doxytag: member="OSL_MF_SIMPLE" ref="ggf573c4a98417de7b7f1c4e3731ee66116d6f526c0681b65ac6ec4e7a38ab44a6" args="" -->OSL_MF_SIMPLE</em>&nbsp;</td><td>
Defines if the map is "simple" (oslDrawMapSimple) - UNSUPPORTED YET, DO NOT USE IT! </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ggf573c4a98417de7b7f1c4e3731ee66115ec453c38f82abde2ba268b97d82e226"></a><!-- doxytag: member="OSL_MF_TILE1_TRANSPARENT" ref="ggf573c4a98417de7b7f1c4e3731ee66115ec453c38f82abde2ba268b97d82e226" args="" -->OSL_MF_TILE1_TRANSPARENT</em>&nbsp;</td><td>
Defines if the first tile is always transparent, no matter its pattern. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gde5d26946532efac20b388eee01aaba2"></a><!-- doxytag: member="map.h::oslCreateMap" ref="gde5d26946532efac20b388eee01aaba2" args="(OSL_IMAGE *img, void *map_data, int tileX, int tileY, int mapSizeX, int mapSizeY, int map_format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a>* oslCreateMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&nbsp;</td>
          <td class="paramname"> <em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>map_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tileX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tileY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mapSizeX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mapSizeY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>map_format</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new map. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>img</em>&nbsp;</td><td>Image used as tileset. Remember the maximum size of images is 512x512, neither the width or the height can exceed 512. In a tileset image, tiles are placed from in lines from left to right and from top to bottom. Each tile has a specific size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>map_data</em>&nbsp;</td><td>Binary data representing the map data in its raw format. This is a table of entries, where each entry is 16-bit (or something else depending on the map format) and represents a tile number to be displayed. Please note that tile entries, just like tilesets, are placed from left to right, and then from top to bottom. To retrieve a specific map entry (x = horizontal position, y = vertical position), the algorithm is the following: ((map_type*)map_data)[y * width + x]. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tileX,tileY</em>&nbsp;</td><td>Size of a tile in the tileset. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapSizeX,mapSizeY</em>&nbsp;</td><td>Width and height of the map. Maps are wrapped around (that is, when you're all to the right, the left is displayed again, same vertically). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>map_format</em>&nbsp;</td><td>One of the <a class="el" href="group__maps.html#g7836fb530ba637c027eb0d5703a4c06d">OSL_MAP_FORMATS</a> values.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL in case of error, a pointer to a map object in case of success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g0656fe572397df56eb032bc5b368b3d3"></a><!-- doxytag: member="map.h::oslDrawMap" ref="g0656fe572397df56eb032bc5b368b3d3" args="(OSL_MAP *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslDrawMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draws a map on the screen, using the map properties:<ul>
<li>scrollX, scrollY: respectively horizontal and vertical scrolling values (in pixels). The map is always drawn on the whole screen. </li></ul>

</div>
</div><p>
<a class="anchor" name="g8ffda5dd55be2d0efdb45eeed26ec243"></a><!-- doxytag: member="map.h::oslDrawMapSimple" ref="g8ffda5dd55be2d0efdb45eeed26ec243" args="(OSL_MAP *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslDrawMapSimple           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Same as oslDrawMap, only here for backward compatibility. Do not use! 
</div>
</div><p>
<a class="anchor" name="g5efcba72b7aa0357ec81308195741259"></a><!-- doxytag: member="map.h::oslDeleteMap" ref="g5efcba72b7aa0357ec81308195741259" args="(OSL_MAP *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslDeleteMap           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes a map. Call this after you've finished with a map. Please note that the map data you supplied to <a class="el" href="group__maps.html#gde5d26946532efac20b388eee01aaba2">oslCreateMap</a> was your own data, passed by reference, and thus it will not be freed! Example: <div class="fragment"><pre class="fragment"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *mapData;
<a class="code" href="struct_o_s_l___m_a_p.html">OSL_MAP</a> *map;
<span class="comment">//Data for a 128x64 map</span>
mapData = malloc(128 * 64 * <span class="keyword">sizeof</span>(*mapData));
<span class="comment">//Create a map with this</span>
map = <a class="code" href="group__maps.html#gde5d26946532efac20b388eee01aaba2">oslCreateMap</a>(anImage, mapData, 16, 16, 128, 64, <a class="code" href="group__maps.html#gg7836fb530ba637c027eb0d5703a4c06dedf97c90ae17227cb4106529940042ae" title="16 bit format">OSL_MF_U16</a>);
<span class="comment">//Now delete this map</span>
<a class="code" href="group__maps.html#g5efcba72b7aa0357ec81308195741259">oslDeleteMap</a>(map);
<span class="comment">//Don't forget to free the map data too</span>
free(mapData);
</pre></div> 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 24 10:25:35 2010 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
